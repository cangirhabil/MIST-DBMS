generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Movie {
  id          Int         @id @default(autoincrement())
  title       String
  releaseYear Int
  posterUrl   String?  
  rating      Float?   
  director    String?  
  duration    Int?     
  overview    String?  
  genres      Genre[]     @relation("MovieGenres")
  movieLists  MovieList[] @relation("MovieListMovies")
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
}

model Genre {
  id      Int      @id @default(autoincrement())
  name    String
  movies  Movie[]  @relation("MovieGenres")
}

model User {
  id       String      @id @default(cuid())
  name     String?
  surname  String?
  email    String      @unique
  password String
  lists    MovieList[] @relation("UserLists")
}

model MovieList {
  id          String   @id @default(cuid())
  title       String
  description String
  movieCount  Int
  createdAt   DateTime @default(now())
  movies      Movie[]  @relation("MovieListMovies")
  user        User     @relation("UserLists", fields: [userId], references: [id])
  userId      String
}

model SearchParams {
  id        Int      @id @default(autoincrement())
  query     String
  genre     String
  yearRange Int[]
  sortBy    String
}